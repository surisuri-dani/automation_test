worker_processes  auto;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    # Image redirection logic for testing
    server {
        listen 80;
        server_name localhost;

        # Root directory for serving files
        root /usr/share/nginx/html;

        # Location block to handle image files
        location ~ ^(.*)\.(gif)$ {
            # Check if the corresponding .mp4 file exists.
            # If it does, serve it.
            # If not, fall back to serving the original .gif file.
            try_files $1.mp4 $uri =404;
        }

        # Catch-all location for other requests (e.g., test.txt)
        location / {
            # Simply serve files from the root directory
        }
    }
}