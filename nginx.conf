worker_processes  auto;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    # Image redirection logic for testing
    server {
        listen 80;
        server_name localhost;

        # Root directory for serving files
        root /usr/share/nginx/html;

        # Location block to handle image files
        location ~ ^(.*)\.gif$ {
            # .mp4 파일이 존재할 경우
            if (-f $document_root$1.mp4) {
                # 302 Found (임시 리디렉션) 응답을 반환
                return 302 $scheme://$host$1.mp4;
            }
        }

        # Catch-all location for other requests (e.g., test.txt)
        location / {
            # Simply serve files from the root directory
        }
    }
}